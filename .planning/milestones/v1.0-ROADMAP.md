# Milestone v1.0: Supabase Extraction

**Status:** SHIPPED 2026-01-23
**Phases:** 1-7
**Total Plans:** 22

## Overview

This roadmap extracted Supabase's production-grade marketing site (apps/www) into a standalone Next.js application for Axite. The journey moved bottom-up through dependency extraction, progressed through infrastructure configuration and content system setup, and culminated in a production-ready build.

## Phases

### Phase 1: Foundation & Extraction

**Goal**: Establish standalone project with all workspace and catalog dependencies resolved
**Depends on**: Nothing (first phase)
**Requirements**: EXTRACT-01, EXTRACT-02
**Plans**: 2 plans

Plans:
- [x] 01-01-PLAN.md - Clone Supabase repo and extract www app with packages
- [x] 01-02-PLAN.md - Convert workspace/catalog protocols and verify pnpm install

**Success Criteria:**
1. Supabase www source code exists in local directory structure
2. All workspace:* protocol references replaced with explicit versions or local paths
3. All catalog: protocol references replaced with actual semver versions
4. pnpm install runs without protocol resolution errors

### Phase 2: Package Inlining

**Goal**: All required monorepo packages inlined into standalone project structure
**Depends on**: Phase 1
**Requirements**: EXTRACT-03
**Plans**: 4 plans

Plans:
- [x] 02-01-PLAN.md - Copy all 7 packages to lib/ directory
- [x] 02-02-PLAN.md - Configure tsconfig path aliases and clean package.json files
- [x] 02-03-PLAN.md - Wire apps/www/tsconfig.json to lib/ packages (gap closure)
- [x] 02-04-PLAN.md - Remove packages/ directory (gap closure)

**Success Criteria:**
1. ui package components exist in project (components/ui or similar)
2. config package (Tailwind, PostCSS) inlined to project root
3. shared-data package (pricing, products) inlined to project
4. icons package inlined or replaced with lucide-react
5. tsconfig base configurations inlined

### Phase 3: Project Configuration

**Goal**: Standalone Next.js 15.5.9 project with working Tailwind and TypeScript configuration
**Depends on**: Phase 2
**Requirements**: INFRA-01, INFRA-02, INFRA-03
**Plans**: 3 plans

Plans:
- [x] 03-01-PLAN.md - Create shared tsconfig base and update lib packages
- [x] 03-02-PLAN.md - Fix Tailwind config (remove missing build dependency, update content paths)
- [x] 03-03-PLAN.md - Clean next.config.mjs and create .env.example

**Success Criteria:**
1. next.config.mjs is standalone (no transpilePackages for external workspaces)
2. Tailwind 3.4.x config compiles without errors
3. All TypeScript path aliases (@ui/*, @common/*, etc.) resolve correctly
4. TypeScript compilation succeeds with no path resolution errors

### Phase 4: Development Environment

**Goal**: Local development server runs and displays content
**Depends on**: Phase 3
**Requirements**: EXTRACT-04
**Plans**: 3 plans

Plans:
- [x] 04-01-PLAN.md - Fix CSS imports (create variable stub, update paths from packages/ to lib/)
- [x] 04-02-PLAN.md - Stub common package exports and clean instrumentation
- [x] 04-03-PLAN.md - Verify dev environment works (server, homepage, navigation, hot reload)

**Success Criteria:**
1. pnpm dev starts without errors
2. Homepage loads in browser at localhost:3000
3. Navigation between pages works without crashes
4. Hot reload functions when editing components

### Phase 5: Content Infrastructure

**Goal**: Blog and MDX content system fully operational
**Depends on**: Phase 4
**Requirements**: CONTENT-01
**Plans**: 3 plans

Plans:
- [x] 05-01-PLAN.md - Stub CMS post fetching to use static MDX only
- [x] 05-02-PLAN.md - Verify individual blog post pages render MDX content
- [x] 05-03-PLAN.md - Human verification of blog rendering (visual check)

**Success Criteria:**
1. MDX files render as blog posts
2. Blog index page lists posts with correct metadata
3. Code syntax highlighting works in MDX content
4. No Contentlayer-related build warnings or errors

### Phase 6: Page Structure

**Goal**: Core page layouts, navigation, and footer working across the site
**Depends on**: Phase 5
**Requirements**: CONTENT-02, CONTENT-03
**Plans**: 4 plans

Plans:
- [x] 06-01-PLAN.md - Verify page rendering (homepage, pricing, blog with Layout)
- [x] 06-02-PLAN.md - Human verification of navigation, footer, and theme
- [x] 06-03-PLAN.md - Fix mobile menu usability (gap closure)
- [x] 06-04-PLAN.md - Fix theme switching cascade (gap closure)

**Success Criteria:**
1. Homepage, about, pricing pages render with correct layouts
2. Navigation dropdowns open and link to correct pages
3. Mobile navigation menu functions correctly
4. Footer renders with all link sections
5. Theme switching (light/dark) works across pages

### Phase 7: Production Build

**Goal**: Production build succeeds and outputs deployable artifacts
**Depends on**: Phase 6
**Requirements**: INFRA-04
**Plans**: 3 plans

Plans:
- [x] 07-01-PLAN.md - Add missing @mdx-js/loader and fix Tailwind CSS class error
- [x] 07-02-PLAN.md - Replace missing TwoOptionToggle import with inline component
- [x] 07-03-PLAN.md - Run production build and verify success criteria

**Success Criteria:**
1. pnpm build completes without errors
2. pnpm start serves production build locally
3. All pages load without 404 or 500 errors
4. No missing CSS classes (Tailwind content paths correct)
5. Build output size is reasonable (no obvious missing tree-shaking)

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Shallow clone (depth 1) | Minimal download, source history not needed | Good |
| Copy all packages to lib/ | Simpler than selective, audit later | Good |
| Use file: relative paths | Standard npm-compatible approach | Good |
| Use moduleResolution: bundler | Modern Next.js standard | Good |
| No-op storage adapter for SSR | Prevents server-side storage errors | Good |
| Transpile local lib/ packages | Proper TypeScript handling | Good |
| Stub CMS functions | Static MDX posts only, no API calls | Good |
| Inline TwoOptionToggle | Replace missing external dependency | Good |

**Issues Resolved:**

- workspace:* and catalog: protocol resolution for standalone project
- TypeScript path alias configuration for inlined packages
- CSS variable imports and design token system
- SSR storage API mismatches with Supabase client
- React context availability in CommandMenu hooks
- Mobile menu transparency and click-outside behavior
- Theme switching CSS variable cascade
- Missing @mdx-js/loader dependency
- Invalid Tailwind gradient class syntax

**Technical Debt Incurred:**

- Placeholder Supabase URL in use (needs real config for backend features)
- React hooks warning from @payloadcms/live-preview-react (non-blocking)
- Some Supabase-specific content remains (to be replaced in future milestone)

---

*Archived: 2026-01-23 as part of v1.0 milestone completion*
*For current project status, see .planning/ROADMAP.md*
