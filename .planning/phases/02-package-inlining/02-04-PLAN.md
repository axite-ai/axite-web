---
phase: 02-package-inlining
plan: 04
type: execute
wave: 1
depends_on: ["02-03"]
files_modified:
  - packages/ (removal)
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "packages/ directory no longer exists"
    - "lib/ is the single source of truth for inlined packages"
    - "No duplicate package code in repository"
  artifacts: []
  key_links: []
---

<objective>
Remove the original packages/ directory now that all packages are inlined to lib/.

Purpose: Close Gap 2 from verification - both packages/ and lib/ currently contain identical code, creating confusion about source of truth. After this plan, lib/ is the only location for package code.
Output: packages/ directory removed from the project.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-package-inlining/02-VERIFICATION.md
@.planning/phases/02-package-inlining/02-03-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify packages/ is no longer referenced by any tsconfig</name>
  <files></files>
  <action>
Before removing packages/, verify no tsconfig.json files reference it.

```bash
cd /Users/brad/Code/personal/axite/axite-new

# Check root tsconfig.json
grep -l 'packages/' tsconfig.json || echo "Root tsconfig: clean"

# Check apps/www/tsconfig.json (should be clean after 02-03)
grep -l 'packages/' apps/www/tsconfig.json || echo "apps/www tsconfig: clean"

# Check for any other tsconfig files referencing packages/
find . -name "tsconfig*.json" -not -path "./node_modules/*" -not -path "./packages/*" -exec grep -l 'packages/' {} \;
```

If any references found, this task should fail and report what needs to be fixed.
Expected: No tsconfig references packages/ (02-03 should have cleaned apps/www, and root never referenced it).
  </action>
  <verify>
```bash
cd /Users/brad/Code/personal/axite/axite-new

# Should output nothing - no tsconfig references packages/
find . -name "tsconfig*.json" -not -path "./node_modules/*" -not -path "./packages/*" -exec grep -l 'packages/' {} \; | head -5

# If empty output, we're safe to remove packages/
echo "If no output above, no tsconfig references packages/"
```
  </verify>
  <done>No tsconfig.json files reference packages/ directory</done>
</task>

<task type="auto">
  <name>Task 2: Remove packages/ directory</name>
  <files>packages/</files>
  <action>
Remove the entire packages/ directory since all packages are now inlined in lib/.

```bash
cd /Users/brad/Code/personal/axite/axite-new

# First, check what's in packages/ for the commit message
ls packages/

# Remove packages/ directory
rm -rf packages/
```

This removes:
- packages/api-types/
- packages/build-icons/ (dev tooling, not needed)
- packages/common/
- packages/config/
- packages/icons/
- packages/shared-data/
- packages/tsconfig/ (settings inlined to root tsconfig.json)
- packages/ui/
- packages/ui-patterns/

The lib/ directory remains as the single source of truth.
  </action>
  <verify>
```bash
cd /Users/brad/Code/personal/axite/axite-new

# Verify packages/ no longer exists
test ! -d packages && echo "PASS: packages/ removed" || echo "FAIL: packages/ still exists"

# Verify lib/ still exists with all packages
ls -d lib/config lib/icons lib/api-types lib/shared-data lib/common lib/ui lib/ui-patterns
```
  </verify>
  <done>packages/ directory removed; lib/ is now the single source of truth</done>
</task>

</tasks>

<verification>
Gap closure verification:
```bash
cd /Users/brad/Code/personal/axite/axite-new

# 1. packages/ does not exist
test ! -d packages && echo "PASS" || echo "FAIL"

# 2. lib/ has all 7 packages
ls -d lib/config lib/icons lib/api-types lib/shared-data lib/common lib/ui lib/ui-patterns && echo "PASS"

# 3. No duplicate code - only one location for each package
find . -path "./node_modules" -prune -o -name "index.tsx" -path "*/ui/*" -print | wc -l  # Should be 1 (only lib/ui)
```
</verification>

<success_criteria>
1. packages/ directory no longer exists
2. lib/ directory contains all 7 inlined packages
3. No tsconfig.json references packages/ (verified before removal)
4. Gap 2 from 02-VERIFICATION.md is closed
</success_criteria>

<output>
After completion, create `.planning/phases/02-package-inlining/02-04-SUMMARY.md`
</output>
