---
phase: 07-production-build
plan: 03
type: execute
wave: 2
depends_on: ["07-01", "07-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "pnpm build completes without errors"
    - "pnpm start serves production build locally"
    - "Homepage, pricing, and blog pages load without 404 or 500 errors"
    - "CSS renders correctly (no missing Tailwind classes)"
  artifacts:
    - path: ".next/BUILD_ID"
      provides: "Production build output"
  key_links: []
---

<objective>
Run production build and verify all success criteria are met.

Purpose: Validate that build fixes from Plans 01-02 result in successful production build
Output: Working production build, verified locally
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-production-build/07-01-SUMMARY.md
@.planning/phases/07-production-build/07-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run production build</name>
  <files></files>
  <action>
Run the production build from the project root:

```bash
pnpm build
```

Capture the full output. If build succeeds, note:
- Build time
- Any warnings (non-blocking)
- Output size information

If build fails with NEW errors (not the ones fixed in Plans 01-02):
- Document the errors
- Assess whether they are blocking or can be addressed with quick fixes
- For complex Supabase-specific features (like survey pages), consider stubbing/disabling rather than fixing
  </action>
  <verify>
Run: `pnpm build`
Verify: Build completes with exit code 0
Check: `.next/BUILD_ID` file exists
  </verify>
  <done>Production build completes successfully</done>
</task>

<task type="auto">
  <name>Task 2: Start and verify production server</name>
  <files></files>
  <action>
Start the production server:

```bash
pnpm start
```

The server should start on port 3000 (or next available port).

Test key pages with curl to verify they return 200:
- Homepage: `curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/`
- Pricing: `curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/pricing`
- Blog index: `curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/blog`
- A blog post: `curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/blog/supabase-auth-helpers-with-remix`

Note: Start server in background, run tests, then stop server.
  </action>
  <verify>
Run production server and curl tests
Verify: All 4 URLs return HTTP 200
  </verify>
  <done>Production server serves all key pages with 200 status</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production build of the marketing site</what-built>
  <how-to-verify>
1. In terminal, run `pnpm start` (from /Users/brad/Code/personal/axite/axite-new)
2. Open browser to http://localhost:3000
3. Verify homepage loads with:
   - Header/navigation visible
   - Hero section with content
   - CSS styling applied (not raw HTML)
4. Navigate to /pricing - verify page loads with styled content
5. Navigate to /blog - verify blog index shows posts
6. Click into any blog post - verify content renders with syntax highlighting
7. Check browser console for any critical errors (warnings OK)
8. Test theme toggle (light/dark) if visible

Expected: Pages look similar to dev mode, CSS applied, no broken layouts
  </how-to-verify>
  <resume-signal>Type "verified" if production build looks correct, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 7 Success Criteria from ROADMAP.md:
1. [x] pnpm build completes without errors
2. [x] pnpm start serves production build locally
3. [x] All pages load without 404 or 500 errors (homepage, pricing, blog verified)
4. [x] No missing CSS classes (human visual verification)
5. [ ] Build output size is reasonable (check .next directory size)
</verification>

<success_criteria>
- `pnpm build` exits with code 0
- `.next/BUILD_ID` exists
- Production server starts without errors
- Homepage, pricing, blog return HTTP 200
- Human verification confirms CSS renders correctly
</success_criteria>

<output>
After completion, create `.planning/phases/07-production-build/07-03-SUMMARY.md`
</output>
