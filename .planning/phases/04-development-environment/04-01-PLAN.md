---
phase: 04-development-environment
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/ui/src/styles/variables.css
  - apps/www/styles/index.css
autonomous: true

must_haves:
  truths:
    - "CSS imports resolve without module not found errors"
    - "Font paths resolve to lib/common/assets/fonts/"
  artifacts:
    - path: "lib/ui/src/styles/variables.css"
      provides: "CSS variable definitions for design tokens"
      contains: "--foreground-default"
    - path: "apps/www/styles/index.css"
      provides: "Updated imports pointing to lib/"
      contains: "lib/ui/src/styles/variables.css"
  key_links:
    - from: "apps/www/styles/index.css"
      to: "lib/ui/src/styles/variables.css"
      via: "@import"
      pattern: "@import.*lib/ui"
---

<objective>
Fix CSS imports that block dev server compilation

Purpose: The dev server cannot compile pages because styles/index.css imports non-existent build artifacts from packages/ui/build/css/. This is the critical blocker identified in Phase 4 research.

Output: CSS variable stub file and updated index.css imports
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-development-environment/04-RESEARCH.md
@apps/www/styles/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CSS variable stub file</name>
  <files>lib/ui/src/styles/variables.css</files>
  <action>
Create a new CSS file at lib/ui/src/styles/variables.css that defines all required CSS variables. This follows the pattern established in Phase 3 (CSS variable stub for Tailwind config).

The file should define CSS custom properties in :root for light theme (default) and override in .dark selector for dark theme. Use HSL values without the hsl() wrapper (just "H S% L%") because Tailwind transforms them with alpha values.

Required variables (based on Tailwind config stub from Phase 3):
- Foreground: --foreground-default, --foreground-light, --foreground-lighter, --foreground-muted
- Background: --background-default, --background-alternative-default, --background-selection, --background-surface-100, --background-surface-200, --background-surface-300, --background-200
- Border: --border-default, --border-muted, --border-strong, --border-stronger
- Brand: --brand-default, --brand-300, --brand-500

Use sensible defaults:
- Light theme: dark grays for foreground (0 0% 9%), white for background (0 0% 100%), light grays for borders
- Dark theme: light grays for foreground (0 0% 98%), near-black for background (0 0% 7%), dark grays for borders
- Brand: green (153 60% 53%) as placeholder - will be replaced in Phase 8

Also include the additional variables used in index.css:
- --colors-purple7, --colors-green12 (used in gradients)
- --auth-ui-card-height: 50vh
- --lw-secondary-color: #8a8f98
  </action>
  <verify>File exists at lib/ui/src/styles/variables.css and contains :root and .dark selectors</verify>
  <done>CSS variable stub file created with all required variables for light and dark themes</done>
</task>

<task type="auto">
  <name>Task 2: Update styles/index.css imports and font paths</name>
  <files>apps/www/styles/index.css</files>
  <action>
Edit apps/www/styles/index.css to fix two issues:

1. Replace the three broken CSS imports with single import to new stub file:
   REMOVE:
   ```css
   @import './../../../packages/ui/build/css/source/global.css';
   @import './../../../packages/ui/build/css/themes/dark-combined.css';
   @import './../../../packages/ui/build/css/themes/light.css';
   ```
   REPLACE WITH:
   ```css
   @import './../../../lib/ui/src/styles/variables.css';
   ```

2. Fix font paths from packages/ to lib/:
   CHANGE:
   ```css
   url(../../../packages/common/assets/fonts/CustomFont-Book.woff2)
   ```
   TO:
   ```css
   url(../../../lib/common/assets/fonts/CustomFont-Book.woff2)
   ```

   Apply this to all font-face declarations (Book and Medium weights, both woff2 and woff formats).

Keep all other content in the file unchanged.
  </action>
  <verify>grep -q "lib/ui/src/styles/variables.css" apps/www/styles/index.css && ! grep -q "packages/ui/build" apps/www/styles/index.css && ! grep -q "packages/common/assets" apps/www/styles/index.css</verify>
  <done>index.css imports from lib/ paths, no remaining packages/ references</done>
</task>

</tasks>

<verification>
1. No "Module not found" errors for CSS imports: grep -r "packages/ui/build" apps/www/styles/ should return nothing
2. Font paths point to lib/: grep "lib/common/assets/fonts" apps/www/styles/index.css shows font references
3. Variables file exists: test -f lib/ui/src/styles/variables.css
</verification>

<success_criteria>
- lib/ui/src/styles/variables.css exists with CSS variable definitions
- apps/www/styles/index.css imports from lib/ui/src/styles/variables.css
- No imports referencing packages/ui/build/ remain
- Font paths reference lib/common/assets/fonts/
</success_criteria>

<output>
After completion, create `.planning/phases/04-development-environment/04-01-SUMMARY.md`
</output>
