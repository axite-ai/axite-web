---
phase: 05-content-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/www/lib/get-cms-posts.tsx
  - apps/www/app/blog/page.tsx
autonomous: true

must_haves:
  truths:
    - "CMS API calls return empty results instead of failing"
    - "Blog index page loads without errors"
  artifacts:
    - path: "apps/www/lib/get-cms-posts.tsx"
      provides: "Stubbed CMS functions returning empty arrays"
      contains: "return []"
  key_links:
    - from: "apps/www/app/blog/page.tsx"
      to: "lib/get-cms-posts.tsx"
      via: "import"
      pattern: "getAllCMSPosts"
---

<objective>
Stub CMS post fetching to return empty results instead of failing.

Purpose: The Supabase CMS API requires authentication we don't have. Static MDX posts in _blog/ provide sufficient content for verification. CMS integration returns empty arrays so the blog works with static posts only.

Output: CMS functions return graceful empty results, blog index page loads successfully
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-content-infrastructure/05-CONTEXT.md
@apps/www/lib/get-cms-posts.tsx
@apps/www/app/blog/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Stub CMS post fetching functions</name>
  <files>apps/www/lib/get-cms-posts.tsx</files>
  <action>
  Modify the three exported CMS functions to return empty results immediately without making API calls:

  1. `getAllCMSPostSlugs()` - Return empty array: `return []`
  2. `getCMSPostBySlug()` - Return null: `return null`
  3. `getAllCMSPosts()` - Return empty array: `return []`

  Add a comment at the top explaining: "CMS integration stubbed - returns empty results. Static MDX posts in _blog/ used instead."

  Keep the existing function signatures and types intact for future CMS integration.
  The goal is graceful degradation, not removal of CMS code.
  </action>
  <verify>
  TypeScript compilation succeeds:
  ```
  cd apps/www && npx tsc --noEmit --skipLibCheck 2>&1 | grep -E "error|Error" || echo "No errors"
  ```
  </verify>
  <done>CMS functions return empty arrays/null without making API calls</done>
</task>

<task type="auto">
  <name>Task 2: Verify blog index page loads</name>
  <files>apps/www/app/blog/page.tsx</files>
  <action>
  The blog page at `app/blog/page.tsx` calls both `getSortedPosts()` (static) and `getAllCMSPosts()` (now stubbed).

  Verify the page will work by:
  1. Confirming getSortedPosts handles _blog directory correctly
  2. Confirming the combined array logic handles empty CMS array:
     ```
     const allPosts = [...staticPostsData, ...cmsPostsData].sort(...)
     ```
  3. The page should now only show static posts (which is ~387 posts from _blog/)

  No code changes needed unless there's an issue with empty array handling.
  </action>
  <verify>
  Start dev server and check blog route returns 200:
  ```
  cd apps/www && timeout 30 pnpm dev &
  sleep 10
  curl -s -o /dev/null -w "%{http_code}" http://localhost:3000/blog || curl -s -o /dev/null -w "%{http_code}" http://localhost:3006/blog
  ```
  </verify>
  <done>Blog index page loads with status 200, showing static posts only</done>
</task>

</tasks>

<verification>
1. `pnpm dev` starts without CMS-related errors
2. `/blog` route returns HTTP 200
3. No "fetch failed" or "401" errors in console
4. TypeScript compiles without errors
</verification>

<success_criteria>
- CMS functions stubbed to return empty results
- Blog index page loads successfully
- Static posts from _blog/ are the only data source
- No authentication or API errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-content-infrastructure/05-01-SUMMARY.md`
</output>
