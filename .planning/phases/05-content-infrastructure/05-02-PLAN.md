---
phase: 05-content-infrastructure
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - apps/www/app/blog/[slug]/page.tsx
autonomous: true

must_haves:
  truths:
    - "Individual blog post pages render MDX content"
    - "Static posts from _blog/ render with frontmatter metadata"
  artifacts:
    - path: "apps/www/app/blog/[slug]/page.tsx"
      provides: "Blog post page that renders static MDX"
      contains: "getPostdata"
  key_links:
    - from: "apps/www/app/blog/[slug]/page.tsx"
      to: "lib/posts.tsx"
      via: "import"
      pattern: "getPostdata|getSortedPosts"
    - from: "apps/www/app/blog/[slug]/page.tsx"
      to: "lib/mdx/mdxSerialize"
      via: "import"
      pattern: "mdxSerialize"
---

<objective>
Verify individual blog post pages render MDX content correctly.

Purpose: Blog post pages at `/blog/[slug]` need to render static MDX files with proper formatting, code blocks, and metadata. This validates the MDX infrastructure works end-to-end.

Output: Blog post pages render static MDX content with proper formatting
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-content-infrastructure/05-CONTEXT.md
@.planning/phases/05-content-infrastructure/05-01-SUMMARY.md
@apps/www/app/blog/[slug]/page.tsx
@apps/www/lib/posts.tsx
@apps/www/lib/mdx/mdxSerialize.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify static post rendering path</name>
  <files>apps/www/app/blog/[slug]/page.tsx</files>
  <action>
  Review the BlogPostPage component to ensure the static MDX path works:

  1. The page first tries to load static post via `getPostdata(slug, '_blog')`
  2. If found, it parses with gray-matter and serializes with mdxSerialize
  3. The CMS fallback path (now stubbed) will return null and be skipped

  Verify the static path handles:
  - File not found gracefully (try/catch exists at line 195)
  - MDX serialization with code-hike options
  - TOC generation from headings
  - Related posts calculation

  Check that generateStaticParams includes static slugs from getAllPostSlugs('_blog').
  </action>
  <verify>
  Check a known static post slug renders:
  ```
  cd apps/www && timeout 30 pnpm dev &
  sleep 10
  # Test a post that exists in _blog/
  curl -s -o /dev/null -w "%{http_code}" "http://localhost:3000/blog/supabase-alpha-april-2020" 2>/dev/null || \
  curl -s -o /dev/null -w "%{http_code}" "http://localhost:3006/blog/supabase-alpha-april-2020" 2>/dev/null
  ```
  </verify>
  <done>Static blog post page returns HTTP 200 for known slug</done>
</task>

<task type="auto">
  <name>Task 2: Verify code-hike configuration is accessible</name>
  <files>apps/www/lib/mdx/mdxSerialize.ts</files>
  <action>
  The mdxSerialize function imports code-hike theme from:
  ```typescript
  import codeHikeTheme from 'config/code-hike.theme.json' with { type: 'json' }
  ```

  Verify:
  1. The `config` path alias resolves to `lib/config` (check tsconfig.json)
  2. The file `lib/config/code-hike.theme.json` exists and is valid JSON
  3. The JSON import with `with { type: 'json' }` works in Next.js 15.5

  If there's an import issue, may need to adjust the import path to use relative paths.
  </action>
  <verify>
  TypeScript can resolve the import:
  ```
  cd apps/www && npx tsc --noEmit --skipLibCheck 2>&1 | grep -E "code-hike|config/" || echo "No code-hike import errors"
  ```
  </verify>
  <done>code-hike theme imports correctly, mdxSerialize compiles</done>
</task>

</tasks>

<verification>
1. Static blog post URLs return HTTP 200
2. No MDX serialization errors in dev console
3. code-hike theme resolves via config/ alias
4. TypeScript compiles mdxSerialize.ts without errors
</verification>

<success_criteria>
- Individual blog post pages render from static MDX files
- code-hike syntax highlighting configuration accessible
- No import or serialization errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-content-infrastructure/05-02-SUMMARY.md`
</output>
