---
phase: 03-project-configuration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/tsconfig/react-library.json
  - lib/ui/tsconfig.json
  - lib/common/tsconfig.json
  - lib/icons/tsconfig.json
  - lib/shared-data/tsconfig.json
  - lib/ui-patterns/tsconfig.json
  - lib/api-types/tsconfig.json
autonomous: true

must_haves:
  truths:
    - "All lib packages have valid tsconfig that doesn't reference missing external configs"
    - "TypeScript can resolve the extends path in each lib package"
    - "TypeScript compiles lib packages without path resolution errors (INFRA-03)"
  artifacts:
    - path: "lib/tsconfig/react-library.json"
      provides: "Shared TypeScript base config for React libraries"
      contains: "moduleResolution"
    - path: "lib/ui/tsconfig.json"
      provides: "UI package TypeScript config"
      contains: "../tsconfig/react-library.json"
    - path: "lib/common/tsconfig.json"
      provides: "Common package TypeScript config"
      contains: "../tsconfig/react-library.json"
  key_links:
    - from: "lib/ui/tsconfig.json"
      to: "lib/tsconfig/react-library.json"
      via: "extends field"
      pattern: '"extends".*react-library'
---

<objective>
Create shared TypeScript base configuration and update all lib packages to use it.

Purpose: Currently all lib packages extend `tsconfig/react-library.json` which doesn't exist (was from Supabase monorepo). This blocks TypeScript compilation.

Output: Working TypeScript configuration hierarchy where all lib packages extend a local shared base.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-project-configuration/03-RESEARCH.md
@lib/ui/tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared TypeScript base configuration</name>
  <files>lib/tsconfig/react-library.json</files>
  <action>
Create `lib/tsconfig/` directory and `lib/tsconfig/react-library.json` with:

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "display": "React Library",
  "compilerOptions": {
    "target": "ES2021",
    "lib": ["dom", "dom.iterable", "ES2021"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "jsx": "react-jsx",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "declaration": true,
    "declarationMap": true,
    "noEmit": true,
    "isolatedModules": true,
    "resolveJsonModule": true
  }
}
```

This matches the existing lib package settings plus adds `resolveJsonModule` (which several packages need) as a sensible default.
  </action>
  <verify>File exists and is valid JSON: `cat lib/tsconfig/react-library.json | jq .`</verify>
  <done>lib/tsconfig/react-library.json exists with React library compiler options</done>
</task>

<task type="auto">
  <name>Task 2: Update all lib package tsconfig files</name>
  <files>
    lib/ui/tsconfig.json
    lib/common/tsconfig.json
    lib/icons/tsconfig.json
    lib/shared-data/tsconfig.json
    lib/ui-patterns/tsconfig.json
    lib/api-types/tsconfig.json
  </files>
  <action>
Update each lib package's tsconfig.json to extend the new local base:

Change from:
```json
{
  "extends": "tsconfig/react-library.json",
  ...
}
```

To:
```json
{
  "extends": "../tsconfig/react-library.json",
  ...
}
```

For packages that don't have a tsconfig.json (check lib/api-types/ and lib/config/), create one if TypeScript files exist there.

Keep any package-specific overrides that exist (like resolveJsonModule in ui package).

Note: lib/config/ is pure JS, doesn't need tsconfig.
  </action>
  <verify>
Verify ALL lib tsconfig files exist and have correct extends path:
```bash
for pkg in lib/*/tsconfig.json; do
  if [ -f "$pkg" ]; then
    echo "Checking $pkg..."
    grep '"extends"' "$pkg"
  fi
done
```
  </verify>
  <done>All lib package tsconfigs extend ../tsconfig/react-library.json and the extends path is valid</done>
</task>

<task type="auto">
  <name>Task 3: Verify TypeScript compilation succeeds (INFRA-03)</name>
  <files>apps/www/tsconfig.json</files>
  <action>
Run TypeScript compilation check to verify all path aliases resolve correctly.

This task confirms INFRA-03 requirement: "All TypeScript path aliases (@ui/*, @common/*, etc.) resolve correctly"

1. Run `tsc --noEmit` from apps/www to check compilation
2. If compilation fails due to path alias issues, fix the paths in apps/www/tsconfig.json
3. Common fixes needed:
   - Update paths from `packages/` to `lib/`
   - Ensure @ui/* points to ../../lib/ui/*
   - Ensure @common/* points to ../../lib/common/*

Note: Some type errors may exist in the extracted code (not our concern this phase). Focus only on path resolution errors (MODULE_NOT_FOUND, cannot find module).
  </action>
  <verify>
Run TypeScript compilation check:
```bash
cd apps/www && npx tsc --noEmit 2>&1 | head -50
# Check for path resolution errors specifically:
cd apps/www && npx tsc --noEmit 2>&1 | grep -i "cannot find module\|module not found" || echo "No path resolution errors"
```
  </verify>
  <done>TypeScript compilation runs without path resolution errors (type errors in extracted code are acceptable)</done>
</task>

</tasks>

<verification>
1. `lib/tsconfig/react-library.json` exists and is valid JSON
2. All lib packages with TypeScript files have tsconfig.json files
3. All tsconfig.json extends paths point to `../tsconfig/react-library.json`
4. No tsconfig.json references the old `tsconfig/react-library.json` without path prefix
5. `tsc --noEmit` in apps/www runs without MODULE_NOT_FOUND errors (INFRA-03)
</verification>

<success_criteria>
- [ ] lib/tsconfig/react-library.json created with proper compiler options
- [ ] lib/ui/tsconfig.json extends ../tsconfig/react-library.json
- [ ] lib/common/tsconfig.json extends ../tsconfig/react-library.json
- [ ] lib/icons/tsconfig.json extends ../tsconfig/react-library.json
- [ ] lib/shared-data/tsconfig.json extends ../tsconfig/react-library.json
- [ ] lib/ui-patterns/tsconfig.json extends ../tsconfig/react-library.json
- [ ] lib/api-types/tsconfig.json exists and extends properly (if TS files exist)
- [ ] tsc --noEmit runs without path resolution errors (INFRA-03)
</success_criteria>

<output>
After completion, create `.planning/phases/03-project-configuration/03-01-SUMMARY.md`
</output>
