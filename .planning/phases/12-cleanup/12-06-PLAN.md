# Plan 12-06: Add Redirects

---
wave: 2
depends_on: [12-01, 12-02, 12-03]
files_modified:
  - apps/www/lib/redirects.js
autonomous: true
---

## Goal

Add redirects for deleted pages to ensure users hitting old URLs are redirected to the homepage.

## Context

With pages removed, direct links to /product, /pricing, /enterprise, and /blog paths will 404. We need to add redirects to the homepage.

The redirects.js file contains ~3000 lines of existing redirects. We'll add our new redirects at the beginning of the array.

Using `permanent: false` (307 redirect) because these pages may return in the future.

## Tasks

<task id="1">
Add redirects at the beginning of the array in `apps/www/lib/redirects.js`:

```javascript
module.exports = [
  // Landing page refactor - removed pages redirect to homepage
  {
    permanent: false,
    source: '/product',
    destination: '/',
  },
  {
    permanent: false,
    source: '/product/:path*',
    destination: '/',
  },
  {
    permanent: false,
    source: '/pricing',
    destination: '/',
  },
  {
    permanent: false,
    source: '/enterprise',
    destination: '/',
  },
  {
    permanent: false,
    source: '/blog',
    destination: '/',
  },
  {
    permanent: false,
    source: '/blog/:path*',
    destination: '/',
  },
  {
    permanent: false,
    source: '/solutions/:path*',
    destination: '/',
  },
  // ... existing redirects follow
```

This covers:
- /product and /product/* paths
- /pricing
- /enterprise
- /blog and /blog/* paths (including individual posts)
- /solutions/* paths (all solution pages)

Note: Existing blog redirects in the file will hit our catch-all first, so they'll redirect to homepage correctly.
</task>

## Verification

<verification>
```bash
# Verify new redirects exist
grep "source: '/product'" apps/www/lib/redirects.js && echo "OK: /product redirect added" || echo "FAIL: /product redirect missing"
grep "source: '/pricing'" apps/www/lib/redirects.js && echo "OK: /pricing redirect added" || echo "FAIL: /pricing redirect missing"
grep "source: '/enterprise'" apps/www/lib/redirects.js && echo "OK: /enterprise redirect added" || echo "FAIL: /enterprise redirect missing"
grep "source: '/blog'" apps/www/lib/redirects.js && echo "OK: /blog redirect added" || echo "FAIL: /blog redirect missing"
grep "source: '/solutions" apps/www/lib/redirects.js && echo "OK: /solutions redirect added" || echo "FAIL: /solutions redirect missing"

# Verify redirects point to homepage
grep -A1 "source: '/product'" apps/www/lib/redirects.js | grep "destination: '/'" && echo "OK: /product -> /" || echo "FAIL: /product redirect destination wrong"
```
</verification>

## must_haves

- [ ] /product redirect to / added
- [ ] /product/:path* redirect to / added
- [ ] /pricing redirect to / added
- [ ] /enterprise redirect to / added
- [ ] /blog redirect to / added
- [ ] /blog/:path* redirect to / added
- [ ] /solutions/:path* redirect to / added
- [ ] All redirects use permanent: false
