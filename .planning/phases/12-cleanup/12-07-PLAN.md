# Plan 12-07: Verify Build and Routes

---
wave: 3
depends_on: [12-04, 12-05, 12-06]
files_modified: []
autonomous: true
---

## Goal

Verify the build succeeds and deleted pages return proper redirects, while kept pages (/trust, /terms, /privacy) still work.

## Context

After all deletions and updates, we need to verify:
1. The Next.js build completes without errors (no broken imports)
2. Removed pages redirect to homepage
3. Kept pages still load correctly

This is the final verification step for Phase 12 success criteria.

## Tasks

<task id="1">
Run the Next.js build to verify no broken imports:
```bash
cd apps/www && pnpm build
```

If build fails due to import errors, identify the broken imports and fix them. Common issues:
- Component importing from deleted file
- Type imports from deleted modules
- Index files re-exporting deleted modules
</task>

<task id="2">
Start the dev server and verify routing:
```bash
cd apps/www && pnpm dev &
sleep 10

# Test redirects (should return 307 to /)
curl -I http://localhost:3000/product 2>/dev/null | head -5
curl -I http://localhost:3000/pricing 2>/dev/null | head -5
curl -I http://localhost:3000/enterprise 2>/dev/null | head -5
curl -I http://localhost:3000/blog 2>/dev/null | head -5

# Test kept pages (should return 200)
curl -I http://localhost:3000/trust 2>/dev/null | head -5
curl -I http://localhost:3000/terms 2>/dev/null | head -5
curl -I http://localhost:3000/privacy 2>/dev/null | head -5

# Stop dev server
pkill -f "next dev" || true
```
</task>

<task id="3">
If any imports are broken, search for and fix them:
```bash
# Search for imports of deleted modules
grep -r "from.*components/Pricing" apps/www --include="*.tsx" --include="*.ts"
grep -r "from.*components/Enterprise" apps/www --include="*.tsx" --include="*.ts"
grep -r "from.*data/product" apps/www --include="*.tsx" --include="*.ts"
grep -r "from.*data/enterprise" apps/www --include="*.tsx" --include="*.ts"
```
</task>

## Verification

<verification>
This plan IS the verification step. Success criteria from phase definition:

1. Navigating to /product returns 404 or redirects to homepage - VERIFIED by curl test
2. Navigating to /enterprise returns 404 or redirects to homepage - VERIFIED by curl test
3. Navigating to /pricing returns 404 or redirects to homepage - VERIFIED by curl test
4. Navigating to /blog returns 404 or redirects to homepage - VERIFIED by curl test
5. /trust page loads correctly with security information - VERIFIED by curl test (200 response)
6. /terms and /privacy pages load correctly - VERIFIED by curl test (200 response)

Build must complete without errors.
</verification>

## must_haves

- [ ] pnpm build completes successfully
- [ ] /product redirects to / (307 response)
- [ ] /pricing redirects to / (307 response)
- [ ] /enterprise redirects to / (307 response)
- [ ] /blog redirects to / (307 response)
- [ ] /trust returns 200
- [ ] /terms returns 200
- [ ] /privacy returns 200
